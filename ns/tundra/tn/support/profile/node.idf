<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="shared">Ly8gcmVwcmVzZW50cyBib3RoIGludGVybmFsIGFuZCBleHRlcm5hbCBwcm9maWxlIGlkZW50aXRp
ZXMKcHVibGljIHN0YXRpYyBjbGFzcyBQcm9maWxlSUQgewogIHByb3RlY3RlZCBTdHJpbmcgdHlw
ZSA9IG51bGw7CiAgcHJvdGVjdGVkIFN0cmluZyB2YWx1ZSA9IG51bGw7CgogIHB1YmxpYyBQcm9m
aWxlSUQoU3RyaW5nIHZhbHVlKSB7CiAgICB0aGlzKHZhbHVlLCBudWxsKTsKICB9ICAKCiAgcHVi
bGljIFByb2ZpbGVJRChTdHJpbmcgdmFsdWUsIFN0cmluZyB0eXBlKSB7CiAgICB0aGlzLnZhbHVl
ID0gdmFsdWU7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogIH0KCiAgcHVibGljIGJvb2xlYW4gZXF1
YWxzKE9iamVjdCBvYmopIHsKICAgIGJvb2xlYW4gcmVzdWx0ID0gZmFsc2U7CiAgICBpZiAob2Jq
ICE9IG51bGwpIHsKICAgICAgaWYgKG9iai5nZXRDbGFzcygpID09IHRoaXMuZ2V0Q2xhc3MoKSkg
ewogICAgICAgIFByb2ZpbGVJRCBvdGhlciA9IChQcm9maWxlSUQpb2JqOwogICAgICAgIHJlc3Vs
dCA9ICgodGhpcy5nZXRUeXBlKCkgPT0gbnVsbCAmJiBvdGhlci5nZXRUeXBlKCkgPT0gbnVsbCkg
fHwgKHRoaXMuZ2V0VHlwZSgpLmVxdWFscyhvdGhlci5nZXRUeXBlKCkpKSkgJiYgKHRoaXMuZ2V0
VmFsdWUoKS5lcXVhbHMob3RoZXIuZ2V0VmFsdWUoKSkpOwogICAgICB9CiAgICB9CiAgICByZXR1
cm4gcmVzdWx0OwogIH0KCiAgcHVibGljIGludCBoYXNoQ29kZSgpIHsKICAgIFN0cmluZyB0eXBl
ID0gdGhpcy5nZXRUeXBlKCk7CiAgICBTdHJpbmcgdmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7Cgog
ICAgaW50IGhhc2ggPSB2YWx1ZS5oYXNoQ29kZSgpOwogICAgaWYgKHR5cGUgIT0gbnVsbCkgaGFz
aCA9IGhhc2ggXiB0eXBlLmhhc2hDb2RlKCk7IC8vIHhvciB0aGUgdHdvIGhhc2hlcwoKICAgIHJl
dHVybiBoYXNoOwogIH0KCiAgLy8gcmV0dXJucyB0aGUgSUQncyB0eXBlIGlmIGl0IGlzIGFuIGV4
dGVybmFsIElELCBvciBudWxsIGlmIGl0IGlzIGFuIGludGVybmFsIElECiAgcHVibGljIFN0cmlu
ZyBnZXRUeXBlKCkgewogICAgcmV0dXJuIHR5cGU7CiAgfQoKICAvLyByZXR1cm5zIHRoZSBJRCdz
IHZhbHVlCiAgcHVibGljIFN0cmluZyBnZXRWYWx1ZSgpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9
CgogIC8vIHJldHVybnMgdHJ1ZSBpZiB0aGlzIGlzIGFuIGludGVybmFsIElECiAgcHVibGljIGJv
b2xlYW4gaXNJbnRlcm5hbCgpIHsKICAgIHJldHVybiB0eXBlID09IG51bGw7CiAgfQoKICAvLyBy
ZXR1cm5zIHRydWUgaWYgdGhpcyBpcyBhbiBleHRlcm5hbCBJRAogIHB1YmxpYyBib29sZWFuIGlz
RXh0ZXJuYWwoKSB7CiAgICByZXR1cm4gIWlzSW50ZXJuYWwoKTsKICB9CgogIC8vIHJldHVybnMg
YW4gaW50ZXJuYWwgSUQgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJRCwgaWYgaXQgZXhpc3RzCiAg
cHVibGljIFByb2ZpbGVJRCB0b0ludGVybmFsSUQoKSB0aHJvd3MgY29tLndtLmFwcC50bi5wcm9m
aWxlLlByb2ZpbGVTdG9yZUV4Y2VwdGlvbiB7CiAgICBQcm9maWxlSUQgb3V0cHV0ID0gbnVsbDsK
CiAgICBpZiAodGhpcy5pc0V4dGVybmFsKCkpIHsKICAgICAgSW50ZWdlciB0eXBlSUQgPSBjb20u
d20uYXBwLnRuLnByb2ZpbGUuTG9va3VwU3RvcmUuZ2V0RXh0ZXJuYWxJRFR5cGUodGhpcy5nZXRU
eXBlKCkpOwogICAgICBpZiAodHlwZUlEID09IG51bGwpIHRocm93IG5ldyBjb20ud20uYXBwLnRu
LnByb2ZpbGUuTG9va3VwU3RvcmVFeGNlcHRpb24oIlRyYWRpbmcgTmV0d29ya3MgcGFydG5lciBw
cm9maWxlIGV4dGVybmFsIElEIHR5cGUgZG9lcyBub3QgZXhpc3Q6ICIgKyB0aGlzLmdldFR5cGUo
KSk7CgogICAgICBpZiAodGhpcy5nZXRWYWx1ZSgpICE9IG51bGwpIHsKICAgICAgICBTdHJpbmcg
aW50ZXJuYWxJRCA9IGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmUuZ2V0SW50ZXJu
YWxJRCh0aGlzLmdldFZhbHVlKCksIHR5cGVJRCk7CiAgICAgICAgaWYgKGludGVybmFsSUQgIT0g
bnVsbCkgb3V0cHV0ID0gbmV3IFByb2ZpbGVJRChpbnRlcm5hbElEKTsKICAgICAgfQogICAgfSBl
bHNlIHsKICAgICAgb3V0cHV0ID0gdGhpczsKICAgIH0KCiAgICByZXR1cm4gb3V0cHV0OwogIH0K
fQoKLy8gcmV0dXJucyB0aGUgcGFydG5lciBwcm9maWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2
ZW4gaW50ZXJuYWwgb3IgZXh0ZXJuYWwgSUQgZnJvbSB0aGUgVHJhZGluZyBOZXR3b3JrcyBkYXRh
YmFzZQpwdWJsaWMgc3RhdGljIElEYXRhIGdldChQcm9maWxlSUQgaWQpIHRocm93cyBjb20ud20u
YXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN0b3JlRXhjZXB0aW9uLCBqYXZhLmlvLklPRXhjZXB0aW9u
IHsKICBJRGF0YSBvdXRwdXQgPSBudWxsOwoKICBpZiAoaWQgIT0gbnVsbCkgaWQgPSBpZC50b0lu
dGVybmFsSUQoKTsgLy8gbm9ybWFsaXplIHRvIGludGVybmFsIElECgogIGlmIChpZCAhPSBudWxs
KSB7CiAgICBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN1bW1hcnkgc3VtbWFyeSA9IGNv
bS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmUuZ2V0UHJvZmlsZVN1bW1hcnkoaWQuZ2V0
VmFsdWUoKSk7IC8vIGlmIGlkIGlzIG51bGwgb3IgZG9lc24ndCBleGlzdCwgdGhpcyBjYWxsIHJl
dHVybnMgbnVsbAogICAgaWYgKHN1bW1hcnkgIT0gbnVsbCkgewogICAgICBjb20ud20uYXBwLnRu
LnByb2ZpbGUuUHJvZmlsZSBwcm9maWxlID0gY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVT
dG9yZS5nZXRQcm9maWxlKGlkLmdldFZhbHVlKCkpOwogICAgICBvdXRwdXQgPSBub3JtYWxpemUo
cHJvZmlsZSwgdHJ1ZSk7CgogICAgICBJRGF0YUN1cnNvciBjdXJzb3IgPSBvdXRwdXQuZ2V0Q3Vy
c29yKCk7CiAgICAgIElEYXRhVXRpbC5wdXQoY3Vyc29yLCAiRXh0ZXJuYWxJRCIsIGdldEV4dGVy
bmFsSURzKHByb2ZpbGUpKTsKICAgICAgSURhdGFVdGlsLnB1dChjdXJzb3IsICJFeHRlbmRlZEZp
ZWxkcyIsIGdldEV4dGVuZGVkRmllbGRzKGlkLmdldFZhbHVlKCkpKTsKICAgICAgSURhdGFVdGls
LnB1dChjdXJzb3IsICJEZWxpdmVyeU1ldGhvZHMiLCBnZXREZWxpdmVyeShwcm9maWxlKSk7CiAg
ICAgIGN1cnNvci5kZXN0cm95KCk7CgogICAgICBJRGF0YVV0aWwubWVyZ2Uobm9ybWFsaXplKHN1
bW1hcnksIHRydWUpLCBvdXRwdXQpOwogICAgfQogIH0KICAKICByZXR1cm4gb3V0cHV0Owp9Cgov
LyByZXR1cm5zIHRoZSBwYXJ0bmVyIHByb2ZpbGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBp
bnRlcm5hbCBJRCBmcm9tIHRoZSBUcmFkaW5nIE5ldHdvcmtzIGRhdGFiYXNlCnB1YmxpYyBzdGF0
aWMgSURhdGEgZ2V0KFN0cmluZyBpZCkgdGhyb3dzIGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9m
aWxlU3RvcmVFeGNlcHRpb24sIGphdmEuaW8uSU9FeGNlcHRpb24gewogIHJldHVybiBnZXQobmV3
IFByb2ZpbGVJRChpZCkpOwp9CgovLyByZXR1cm5zIHRoZSBwYXJ0bmVyIHByb2ZpbGUgYXNzb2Np
YXRlZCB3aXRoIHRoZSBnaXZlbiBpbnRlcm5hbCBvciBleHRlcm5hbCBJRCBmcm9tIHRoZSBUcmFk
aW5nIE5ldHdvcmtzIGRhdGFiYXNlCnB1YmxpYyBzdGF0aWMgSURhdGEgZ2V0KFN0cmluZyBpZCwg
U3RyaW5nIHR5cGUpIHRocm93cyBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN0b3JlRXhj
ZXB0aW9uLCBqYXZhLmlvLklPRXhjZXB0aW9uIHsKICByZXR1cm4gZ2V0KG5ldyBQcm9maWxlSUQo
aWQsIHR5cGUpKTsKfQoKLy8gcmV0dXJucyB0aGUgbXkgZW50ZXJwcmlzZSBwcm9maWxlIGZyb20g
dGhlIFRyYWRpbmcgTmV0d29ya3MgZGF0YWJhc2UKcHVibGljIHN0YXRpYyBJRGF0YSBzZWxmKCkg
dGhyb3dzIGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmVFeGNlcHRpb24sIGphdmEu
aW8uSU9FeGNlcHRpb24gewogIHJldHVybiBnZXQobmV3IFByb2ZpbGVJRChjb20ud20uYXBwLnRu
LnByb2ZpbGUuUHJvZmlsZVN0b3JlLmdldE15SUQoKSkpOwp9CgovLyByZXR1cm5zIGEgbGlzdCBv
ZiBhbGwgcGFydG5lciBwcm9maWxlcwpwdWJsaWMgc3RhdGljIElEYXRhW10gbGlzdCgpIHRocm93
cyBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN0b3JlRXhjZXB0aW9uLCBqYXZhLmlvLklP
RXhjZXB0aW9uIHsKICBqYXZhLnV0aWwuTGlzdCBzdW1tYXJpZXMgPSBjb20ud20uYXBwLnRuLnBy
b2ZpbGUuUHJvZmlsZVN0b3JlLmdldFByb2ZpbGVTdW1tYXJ5TGlzdChmYWxzZSwgZmFsc2UpOwog
IGphdmEudXRpbC5MaXN0PElEYXRhPiBvdXRwdXQgPSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxJ
RGF0YT4oc3VtbWFyaWVzLnNpemUoKSk7CiAgamF2YS51dGlsLkl0ZXJhdG9yIGl0ZXJhdG9yID0g
c3VtbWFyaWVzLml0ZXJhdG9yKCk7CgogIHdoaWxlKGl0ZXJhdG9yLmhhc05leHQoKSkgewogICAg
Y29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVTdW1tYXJ5IHN1bW1hcnkgPSAoY29tLndtLmFw
cC50bi5wcm9maWxlLlByb2ZpbGVTdW1tYXJ5KWl0ZXJhdG9yLm5leHQoKTsKICAgIG91dHB1dC5h
ZGQoZ2V0KG5ldyBQcm9maWxlSUQoc3VtbWFyeS5nZXRQcm9maWxlSUQoKSkpKTsKICB9CgogIHJl
dHVybiBvdXRwdXQudG9BcnJheShuZXcgSURhdGFbMF0pOwp9CgovLyByZXR1cm5zIGFsbCBleHRl
cm5hbCBJRHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBwcm9maWxlIGFzIGFuIElEYXRhCnB1
YmxpYyBzdGF0aWMgSURhdGEgZ2V0RXh0ZXJuYWxJRHMoY29tLndtLmFwcC50bi5wcm9maWxlLlBy
b2ZpbGUgcHJvZmlsZSkgdGhyb3dzIGNvbS53bS5hcHAudG4ucHJvZmlsZS5Mb29rdXBTdG9yZUV4
Y2VwdGlvbiB7CiAgSURhdGEgb3V0cHV0ID0gSURhdGFGYWN0b3J5LmNyZWF0ZSgpOwogIElEYXRh
Q3Vyc29yIGN1cnNvciA9IG91dHB1dC5nZXRDdXJzb3IoKTsKCiAgamF2YS51dGlsLk1hcDxJbnRl
Z2VyLCBTdHJpbmc+IHR5cGVzID0gZ2V0RXh0ZXJuYWxJRFR5cGVzKCk7CiAgamF2YS51dGlsLkVu
dW1lcmF0aW9uIGV4dGVybmFsSURzID0gcHJvZmlsZS5nZXRFeHRlcm5hbElEcygpOwoKICB3aGls
ZShleHRlcm5hbElEcy5oYXNNb3JlRWxlbWVudHMoKSkgewogICAgY29tLndtLmFwcC50bi5wcm9m
aWxlLklEIGV4dGVybmFsSUQgPSAoY29tLndtLmFwcC50bi5wcm9maWxlLklEKWV4dGVybmFsSURz
Lm5leHRFbGVtZW50KCk7CiAgICBpZiAoZXh0ZXJuYWxJRCAhPSBudWxsKSB7CiAgICAgIElEYXRh
VXRpbC5wdXQoY3Vyc29yLCB0eXBlcy5nZXQoZXh0ZXJuYWxJRC5nZXRJRFR5cGUoKSksIGV4dGVy
bmFsSUQuZ2V0RXh0ZXJuYWxJRCgpKTsKICAgIH0KICB9CgogIGN1cnNvci5kZXN0cm95KCk7Cgog
IHJldHVybiBvdXRwdXQ7Cn0KCi8vIHJldHVybnMgYWxsIGRlbGl2ZXJ5IG1ldGhvZHMgYXNzb2Np
YXRlZCB3aXRoIHRoZSBnaXZlbiBwcm9maWxlIGFzIGFuIElEYXRhCnB1YmxpYyBzdGF0aWMgSURh
dGEgZ2V0RGVsaXZlcnkoY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGUgcHJvZmlsZSkgewog
IGphdmEudXRpbC5FbnVtZXJhdGlvbiBkZXN0aW5hdGlvbnMgPSBwcm9maWxlLmdldERlc3RpbmF0
aW9ucygpOwogIGlmIChkZXN0aW5hdGlvbnMgPT0gbnVsbCkgcmV0dXJuIG51bGw7CgogIElEYXRh
IG91dHB1dCA9IElEYXRhRmFjdG9yeS5jcmVhdGUoKTsKICBJRGF0YUN1cnNvciBjdXJzb3IgPSBv
dXRwdXQuZ2V0Q3Vyc29yKCk7CgogIGNvbS53bS5hcHAudG4ucHJvZmlsZS5EZXN0aW5hdGlvbiBw
cmVmZXJyZWQgPSBwcm9maWxlLmdldFByZWZlcnJlZERlc3RpbmF0aW9uKCk7CiAgaWYgKHByZWZl
cnJlZCAhPSBudWxsKSBJRGF0YVV0aWwucHV0KGN1cnNvciwgIlByZWZlcnJlZCBQcm90b2NvbCIs
IG5vcm1hbGl6ZShwcmVmZXJyZWQsIHRydWUpKTsKCiAgd2hpbGUoZGVzdGluYXRpb25zLmhhc01v
cmVFbGVtZW50cygpKSB7CiAgICBjb20ud20uYXBwLnRuLnByb2ZpbGUuRGVzdGluYXRpb24gZGVz
dGluYXRpb24gPSAoY29tLndtLmFwcC50bi5wcm9maWxlLkRlc3RpbmF0aW9uKWRlc3RpbmF0aW9u
cy5uZXh0RWxlbWVudCgpOwogICAgaWYgKGRlc3RpbmF0aW9uICE9IG51bGwpIHsKICAgICAgSURh
dGFVdGlsLnB1dChjdXJzb3IsIGRlc3RpbmF0aW9uLmdldFByb3RvY29sRGlzcGxheU5hbWUoKSwg
bm9ybWFsaXplKGRlc3RpbmF0aW9uLCB0cnVlKSk7CiAgICB9CiAgfQogIGN1cnNvci5kZXN0cm95
KCk7CgogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIHJlbWFwcyBleHRlcm5hbCBJRCB0eXBlIGhhc2h0
YWJsZSBzbyB0aGUgSUQgaXMgdGhlIGtleQpwdWJsaWMgc3RhdGljIGphdmEudXRpbC5NYXA8SW50
ZWdlciwgU3RyaW5nPiBnZXRFeHRlcm5hbElEVHlwZXMoKSB0aHJvd3MgY29tLndtLmFwcC50bi5w
cm9maWxlLkxvb2t1cFN0b3JlRXhjZXB0aW9uIHsKICBqYXZhLnV0aWwuSGFzaHRhYmxlIHR5cGVz
ID0gY29tLndtLmFwcC50bi5wcm9maWxlLkxvb2t1cFN0b3JlLmdldEV4dGVybmFsSURUeXBlcygp
OwogIGphdmEudXRpbC5NYXA8SW50ZWdlciwgU3RyaW5nPiBvdXRwdXQgPSBuZXcgamF2YS51dGls
LlRyZWVNYXA8SW50ZWdlciwgU3RyaW5nPigpOwoKICBqYXZhLnV0aWwuRW51bWVyYXRpb24ga2V5
cyA9IHR5cGVzLmtleXMoKTsKICB3aGlsZShrZXlzLmhhc01vcmVFbGVtZW50cygpKSB7CiAgICBT
dHJpbmcga2V5ID0gKFN0cmluZylrZXlzLm5leHRFbGVtZW50KCk7CiAgICBJbnRlZ2VyIHZhbHVl
ID0gKEludGVnZXIpdHlwZXMuZ2V0KGtleSk7CiAgICBvdXRwdXQucHV0KHZhbHVlLCBrZXkpOwog
IH0gCgogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIHJldHVybnMgdGhlIGV4dGVuZGVkIGZpZWxkcyBm
b3IgYSBnaXZlbiBwYXJ0bmVyIHByb2ZpbGUKcHVibGljIHN0YXRpYyBJRGF0YSBnZXRFeHRlbmRl
ZEZpZWxkcyhTdHJpbmcgaWQpIHRocm93cyBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN0
b3JlRXhjZXB0aW9uIHsKICBJRGF0YSBvdXRwdXQgPSBJRGF0YUZhY3RvcnkuY3JlYXRlKCk7CiAg
SURhdGFDdXJzb3IgY3Vyc29yID0gb3V0cHV0LmdldEN1cnNvcigpOwoKICBqYXZhLnV0aWwuSGFz
aHRhYmxlIGdyb3VwcyA9IGNvbS53bS5hcHAudG4ucHJvZmlsZS5Mb29rdXBTdG9yZS5nZXRGaWVs
ZEdyb3VwcygpOwogIGlmIChncm91cHMgIT0gbnVsbCkgewogICAgamF2YS51dGlsLkVudW1lcmF0
aW9uIGtleXMgPSBncm91cHMua2V5cygpOwogICAgCiAgICB3aGlsZShrZXlzLmhhc01vcmVFbGVt
ZW50cygpKSB7CiAgICAgIFN0cmluZyBncm91cE5hbWUgPSAoU3RyaW5nKWtleXMubmV4dEVsZW1l
bnQoKTsKICAgICAgaW50IGdyb3VwSUQgPSAoU2hvcnQpZ3JvdXBzLmdldChncm91cE5hbWUpOwoK
ICAgICAgSURhdGEgZ3JvdXAgPSBJRGF0YUZhY3RvcnkuY3JlYXRlKCk7CiAgICAgIElEYXRhQ3Vy
c29yIGdjID0gZ3JvdXAuZ2V0Q3Vyc29yKCk7CgogICAgICBqYXZhLnV0aWwuVmVjdG9yIGZpZWxk
cyA9IGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmUuZ2V0RXh0ZW5kZWRGaWVsZHMo
aWQsIGdyb3VwSUQpOwogICAgICBpbnQgc2l6ZSA9IGZpZWxkcy5zaXplKCk7CgogICAgICBmb3Ig
KGludCBpID0gMDsgaSA8IHNpemU7IGkrKykgewogICAgICAgIGNvbS53bS5hcHAudG4ucHJvZmls
ZS5FeHRlbmRlZFByb2ZpbGVGaWVsZCBmaWVsZCA9IChjb20ud20uYXBwLnRuLnByb2ZpbGUuRXh0
ZW5kZWRQcm9maWxlRmllbGQpZmllbGRzLmdldChpKTsKICAgICAgICBpZiAoZmllbGQgIT0gbnVs
bCkgewogICAgICAgICAgU3RyaW5nIG5hbWUgPSBmaWVsZC5nZXROYW1lKCk7CiAgICAgICAgICBP
YmplY3QgdmFsdWUgPSBmaWVsZC5nZXRWYWx1ZSgpOwogICAgICAgICAgaWYgKHZhbHVlICE9IG51
bGwpIElEYXRhVXRpbC5wdXQoZ2MsIG5hbWUsIHZhbHVlKTsgICAgICAgIAogICAgICAgIH0KICAg
ICAgfQogICAgICBnYy5kZXN0cm95KCk7CgogICAgICBpZiAoc2l6ZSA+IDApIElEYXRhVXRpbC5w
dXQoY3Vyc29yLCBncm91cE5hbWUsIGdyb3VwKTsKICAgIH0gICAgCiAgfQogIGN1cnNvci5kZXN0
cm95KCk7CgogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIHJldHVybnMgYSBuZXcgSURhdGEgZG9jdW1l
bnQsIHdoZXJlIGFsbCBJRGF0YXMgYXJlIGltcGxlbWVudGVkIHdpdGggdGhlIHNhbWUgY2xhc3Ms
IGFuZCBhbGwKLy8gZnVsbHkgcXVhbGlmaWVkIGtleXMgYXJlIHJlcGxhY2VkIHdpdGggYSBuZXN0
ZWQgc3RydWN0dXJlCnB1YmxpYyBzdGF0aWMgSURhdGEgbm9ybWFsaXplKElEYXRhIGlucHV0LCBi
b29sZWFuIHJlY3Vyc2UpIHsKICBpZiAoaW5wdXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CgogIElE
YXRhIG91dHB1dCA9IElEYXRhRmFjdG9yeS5jcmVhdGUoKTsKICBJRGF0YUN1cnNvciBpYyA9IGlu
cHV0LmdldEN1cnNvcigpOwogIElEYXRhQ3Vyc29yIG9jID0gb3V0cHV0LmdldEN1cnNvcigpOwoK
ICB0cnkgewogICAgd2hpbGUoaWMubmV4dCgpKSB7CiAgICAgIFN0cmluZyBrZXkgPSBpYy5nZXRL
ZXkoKTsKICAgICAgT2JqZWN0IHZhbHVlID0gaWMuZ2V0VmFsdWUoKTsKCiAgICAgIGlmICh2YWx1
ZSAhPSBudWxsKSB7CiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgY29tLndtLnV0aWwuY29k
ZXIuSURhdGFDb2RhYmxlKSB7CiAgICAgICAgICB2YWx1ZSA9ICgoY29tLndtLnV0aWwuY29kZXIu
SURhdGFDb2RhYmxlKXZhbHVlKS5nZXRJRGF0YSgpOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUg
aW5zdGFuY2VvZiBjb20ud20udXRpbC5jb2Rlci5WYWx1ZXNDb2RhYmxlKSB7CiAgICAgICAgICB2
YWx1ZSA9ICgoY29tLndtLnV0aWwuY29kZXIuVmFsdWVzQ29kYWJsZSl2YWx1ZSkuZ2V0VmFsdWVz
KCk7CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGNvbS53bS51dGlsLmNvZGVy
LklEYXRhQ29kYWJsZVtdKSB7CiAgICAgICAgICB2YWx1ZSA9IG5vcm1hbGl6ZSgoY29tLndtLnV0
aWwuY29kZXIuSURhdGFDb2RhYmxlW10pdmFsdWUsIHJlY3Vyc2UpOwogICAgICAgIH0gZWxzZSBp
ZiAodmFsdWUgaW5zdGFuY2VvZiBjb20ud20udXRpbC5jb2Rlci5WYWx1ZXNDb2RhYmxlW10pIHsK
ICAgICAgICAgIHZhbHVlID0gbm9ybWFsaXplKChjb20ud20udXRpbC5jb2Rlci5WYWx1ZXNDb2Rh
YmxlW10pdmFsdWUsIHJlY3Vyc2UpOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2Vv
ZiBJRGF0YVtdKSB7CiAgICAgICAgICB2YWx1ZSA9IG5vcm1hbGl6ZSgoSURhdGFbXSl2YWx1ZSwg
cmVjdXJzZSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIGNvbS53bS51dGls
LlRhYmxlKSB7CiAgICAgICAgICB2YWx1ZSA9IG5vcm1hbGl6ZSgoKGNvbS53bS51dGlsLlRhYmxl
KXZhbHVlKS5nZXRWYWx1ZXMoKSwgcmVjdXJzZSk7CiAgICAgICAgfSBlbHNlIGlmIChyZWN1cnNl
ICYmIHZhbHVlIGluc3RhbmNlb2YgSURhdGEpIHsKICAgICAgICAgIHZhbHVlID0gbm9ybWFsaXpl
KChJRGF0YSl2YWx1ZSwgcmVjdXJzZSk7CiAgICAgICAgfQogICAgICAgIElEYXRhVXRpbC5wdXQo
b2MsIGtleSwgdmFsdWUpOwogICAgICB9CiAgICB9CiAgfSBmaW5hbGx5IHsKICAgIGljLmRlc3Ry
b3koKTsKICB9CgogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIG5vcm1hbGl6ZXMgYW4gSURhdGFbXSwg
d2hlcmUgYWxsIElEYXRhcyBhcmUgaW1wbGVtZW50ZWQgd2l0aCB0aGUgc2FtZSBjbGFzcywgYW5k
IGFsbAovLyBmdWxseSBxdWFsaWZpZWQga2V5cyBhcmUgcmVwbGFjZWQgd2l0aCBhIG5lc3RlZCBz
dHJ1Y3R1cmUKcHVibGljIHN0YXRpYyBJRGF0YVtdIG5vcm1hbGl6ZShJRGF0YVtdIGlucHV0LCBi
b29sZWFuIHJlY3Vyc2UpIHsKICBpZiAoaW5wdXQgPT0gbnVsbCkgcmV0dXJuIG51bGw7CgogIElE
YXRhW10gb3V0cHV0ID0gbmV3IElEYXRhW2lucHV0Lmxlbmd0aF07CiAgZm9yIChpbnQgaSA9IDA7
IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgb3V0cHV0W2ldID0gbm9ybWFsaXplKGlucHV0
W2ldLCByZWN1cnNlKTsKICB9CgogIHJldHVybiBvdXRwdXQ7Cn0KCi8vIGNvbnZlcnRzIGFuIElE
YXRhQ29kYWJsZVtdIHRvIGFuIElEYXRhW10gYW5kIG5vcm1hbGl6ZXMsIHdoZXJlIGFsbCBJRGF0
YXMgYXJlIGltcGxlbWVudGVkIAovLyB3aXRoIHRoZSBzYW1lIGNsYXNzLCBhbmQgYWxsIGZ1bGx5
IHF1YWxpZmllZCBrZXlzIGFyZSByZXBsYWNlZCB3aXRoIGEgbmVzdGVkIHN0cnVjdHVyZQpwdWJs
aWMgc3RhdGljIElEYXRhW10gbm9ybWFsaXplKGNvbS53bS51dGlsLmNvZGVyLklEYXRhQ29kYWJs
ZVtdIGlucHV0LCBib29sZWFuIHJlY3Vyc2UpIHsKICBpZiAoaW5wdXQgPT0gbnVsbCkgcmV0dXJu
IG51bGw7CgogIElEYXRhW10gb3V0cHV0ID0gbmV3IElEYXRhW2lucHV0Lmxlbmd0aF07CiAgZm9y
IChpbnQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgb3V0cHV0W2ldID0gbm9y
bWFsaXplKGlucHV0W2ldLmdldElEYXRhKCksIHJlY3Vyc2UpOwogIH0KICAKICByZXR1cm4gb3V0
cHV0Owp9CgovLyBjb252ZXJ0cyBhIFZhbHVlc0NvZGFibGVbXSB0byBhbiBJRGF0YVtdIGFuZCBu
b3JtYWxpemVzLCB3aGVyZSBhbGwgSURhdGFzIGFyZSBpbXBsZW1lbnRlZCAKLy8gd2l0aCB0aGUg
c2FtZSBjbGFzcywgYW5kIGFsbCBmdWxseSBxdWFsaWZpZWQga2V5cyBhcmUgcmVwbGFjZWQgd2l0
aCBhIG5lc3RlZCBzdHJ1Y3R1cmUKcHVibGljIHN0YXRpYyBJRGF0YVtdIG5vcm1hbGl6ZShjb20u
d20udXRpbC5jb2Rlci5WYWx1ZXNDb2RhYmxlW10gaW5wdXQsIGJvb2xlYW4gcmVjdXJzZSkgewog
IGlmIChpbnB1dCA9PSBudWxsKSByZXR1cm4gbnVsbDsKCiAgSURhdGFbXSBvdXRwdXQgPSBuZXcg
SURhdGFbaW5wdXQubGVuZ3RoXTsKICBmb3IgKGludCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsg
aSsrKSB7CiAgICBvdXRwdXRbaV0gPSBub3JtYWxpemUoaW5wdXRbaV0uZ2V0VmFsdWVzKCksIHJl
Y3Vyc2UpOwogIH0KICAKICByZXR1cm4gb3V0cHV0Owp9CgoKcHVibGljIHN0YXRpYyBjbGFzcyBj
YWNoZSB7CiAgLy8gbG9jYWwgcGFydG5lciBwcm9maWxlIGNhY2hlCiAgcHJvdGVjdGVkIHN0YXRp
YyBqYXZhLnV0aWwuTWFwPFByb2ZpbGVJRCwgSURhdGE+IHByb2ZpbGVzID0gbmV3IGphdmEudXRp
bC5jb25jdXJyZW50LkNvbmN1cnJlbnRIYXNoTWFwPFByb2ZpbGVJRCwgSURhdGE+KCk7CgogIC8v
IHJlZnJlc2hlcyB0aGUgbG9jYWwgcGFydG5lciBwcm9maWxlIGNhY2hlIGZyb20gdGhlIFROIGRh
dGFiYXNlCiAgcHVibGljIHN0YXRpYyB2b2lkIHJlZnJlc2goKSB0aHJvd3MgY29tLndtLmFwcC50
bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4Y2VwdGlvbiwgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAg
ICBqYXZhLnV0aWwuSXRlcmF0b3I8UHJvZmlsZUlEPiBpdGVyYXRvciA9IHByb2ZpbGVzLmtleVNl
dCgpLml0ZXJhdG9yKCk7CiAgICB3aGlsZShpdGVyYXRvci5oYXNOZXh0KCkpIGdldChpdGVyYXRv
ci5uZXh0KCksIHRydWUpOwogIH0KCiAgLy8gY2xlYXJzIHRoZSBsb2NhbCBwYXJ0bmVyIHByb2Zp
bGUgY2FjaGUKICBwdWJsaWMgc3RhdGljIHZvaWQgY2xlYXIoKSB7CiAgICBwcm9maWxlcy5jbGVh
cigpOwogIH0KCiAgLy8gc2VlZHMgdGhlIGxvY2FsIHBhcnRuZXIgcHJvZmlsZSBjYWNoZSB3aXRo
IGFsbCBwYXJ0bmVycwogIHB1YmxpYyBzdGF0aWMgSURhdGFbXSBzZWVkKCkgdGhyb3dzIGNvbS53
bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmVFeGNlcHRpb24sIGphdmEuaW8uSU9FeGNlcHRp
b24gewogICAgamF2YS51dGlsLkxpc3Qgc3VtbWFyaWVzID0gY29tLndtLmFwcC50bi5wcm9maWxl
LlByb2ZpbGVTdG9yZS5nZXRQcm9maWxlU3VtbWFyeUxpc3QoZmFsc2UsIGZhbHNlKTsKICAgIGph
dmEudXRpbC5MaXN0PElEYXRhPiBvdXRwdXQgPSBuZXcgamF2YS51dGlsLkFycmF5TGlzdDxJRGF0
YT4oc3VtbWFyaWVzLnNpemUoKSk7CiAgICBqYXZhLnV0aWwuSXRlcmF0b3IgaXRlcmF0b3IgPSBz
dW1tYXJpZXMuaXRlcmF0b3IoKTsKCiAgICBjbGVhcigpOwoKICAgIHdoaWxlKGl0ZXJhdG9yLmhh
c05leHQoKSkgewogICAgICBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN1bW1hcnkgc3Vt
bWFyeSA9IChjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN1bW1hcnkpaXRlcmF0b3IubmV4
dCgpOwogICAgICBvdXRwdXQuYWRkKGdldChuZXcgUHJvZmlsZUlEKHN1bW1hcnkuZ2V0UHJvZmls
ZUlEKCkpLCB0cnVlKSk7CiAgICB9CgogICAgcmV0dXJuIG91dHB1dC50b0FycmF5KG5ldyBJRGF0
YVswXSk7CiAgfQoKICAvLyByZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIGxvY2FsbHkgY2FjaGVk
IHBhcnRuZXIgcHJvZmlsZXMKICBwdWJsaWMgc3RhdGljIElEYXRhW10gbGlzdCgpIHsKICAgIGph
dmEudXRpbC5MaXN0PElEYXRhPiBsaXN0ID0gbmV3IGphdmEudXRpbC5BcnJheUxpc3QocHJvZmls
ZXMuc2l6ZSgpKTsKICAgIGphdmEudXRpbC5JdGVyYXRvcjxQcm9maWxlSUQ+IGl0ZXJhdG9yID0g
cHJvZmlsZXMua2V5U2V0KCkuaXRlcmF0b3IoKTsKCiAgICB3aGlsZShpdGVyYXRvci5oYXNOZXh0
KCkpIHsKICAgICAgUHJvZmlsZUlEIGlkID0gaXRlcmF0b3IubmV4dCgpOwogICAgICAvLyBvbmx5
IHJldHVybiB0aGUgcHJvZmlsZXMgYXNzb2NpYXRlZCB3aXRoIGFuIGludGVybmFsIElECiAgICAg
IGlmIChpZC5pc0ludGVybmFsKCkpIGxpc3QuYWRkKHByb2ZpbGVzLmdldChpZCkpOwogICAgfQoK
ICAgIHJldHVybiAoSURhdGFbXSlsaXN0LnRvQXJyYXkobmV3IElEYXRhWzBdKTsKICB9CgogIC8v
IHJldHVybnMgdGhlIGdpdmVuIHByb2ZpbGUgZnJvbSB0aGUgY2FjaGUsIGlmIGl0IGV4aXN0cwog
IHB1YmxpYyBzdGF0aWMgSURhdGEgZ2V0KFByb2ZpbGVJRCBpZCwgYm9vbGVhbiByZWxvYWQpIHRo
cm93cyBjb20ud20uYXBwLnRuLnByb2ZpbGUuUHJvZmlsZVN0b3JlRXhjZXB0aW9uLCBqYXZhLmlv
LklPRXhjZXB0aW9uIHsKICAgIElEYXRhIHByb2ZpbGUgPSBudWxsOwoKICAgIGlmIChpZCAhPSBu
dWxsKSB7CiAgICAgIGlmICghcmVsb2FkICYmIHByb2ZpbGVzLmNvbnRhaW5zS2V5KGlkKSkgewog
ICAgICAgIHByb2ZpbGUgPSBwcm9maWxlcy5nZXQoaWQpOwogICAgICB9IGVsc2UgewogICAgICAg
IHByb2ZpbGUgPSB0dW5kcmEudG4uc3VwcG9ydC5wcm9maWxlLmdldChpZCk7CgogICAgICAgIGlm
IChpZC5pc0V4dGVybmFsKCkpIHsKICAgICAgICAgIHB1dChpZCwgcHJvZmlsZSk7IC8vIGNhY2hl
IHByb2ZpbGUgYWdhaW5zdCBleHRlcm5hbCBJRAogICAgICAgICAgaWQgPSBpZC50b0ludGVybmFs
SUQoKTsKICAgICAgICB9CgogICAgICAgIGlmIChpZCAhPSBudWxsKSBwdXQoaWQsIHByb2ZpbGUp
OyAvLyBjYWNoZSBwcm9maWxlIGFnYWluc3QgaW50ZXJuYWwgSUQKICAgICAgfQogICAgfQoKICAg
IHJldHVybiBwcm9maWxlOwogIH0KCiAgLy8gcmV0dXJucyB0aGUgZ2l2ZW4gcHJvZmlsZSBmcm9t
IHRoZSBjYWNoZSwgaWYgaXQgZXhpc3RzCiAgcHVibGljIHN0YXRpYyBJRGF0YSBnZXQoUHJvZmls
ZUlEIGlkKSB0aHJvd3MgY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4Y2VwdGlv
biwgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAgICByZXR1cm4gZ2V0KGlkLCBmYWxzZSk7CiAgfQoK
ICAvLyByZXR1cm5zIHRoZSBwYXJ0bmVyIHByb2ZpbGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZl
biBpbnRlcm5hbCBJRAogIHB1YmxpYyBzdGF0aWMgSURhdGEgZ2V0KFN0cmluZyBpZCkgdGhyb3dz
IGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3RvcmVFeGNlcHRpb24sIGphdmEuaW8uSU9F
eGNlcHRpb24gewogICAgcmV0dXJuIGdldChuZXcgUHJvZmlsZUlEKGlkKSwgZmFsc2UpOwogIH0K
CiAgLy8gcmV0dXJucyB0aGUgcGFydG5lciBwcm9maWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2
ZW4gaW50ZXJuYWwgSUQKICBwdWJsaWMgc3RhdGljIElEYXRhIGdldChTdHJpbmcgaWQsIGJvb2xl
YW4gcmVsb2FkKSB0aHJvd3MgY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4Y2Vw
dGlvbiwgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAgICByZXR1cm4gZ2V0KG5ldyBQcm9maWxlSUQo
aWQpLCByZWxvYWQpOwogIH0KCiAgLy8gcmV0dXJucyB0aGUgcGFydG5lciBwcm9maWxlIGFzc29j
aWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gaW50ZXJuYWwgb3IgZXh0ZXJuYWwgSUQKICBwdWJsaWMgc3Rh
dGljIElEYXRhIGdldChTdHJpbmcgaWQsIFN0cmluZyB0eXBlKSB0aHJvd3MgY29tLndtLmFwcC50
bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4Y2VwdGlvbiwgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAg
ICByZXR1cm4gZ2V0KGlkLCB0eXBlLCBmYWxzZSk7CiAgfQoKICAvLyByZXR1cm5zIHRoZSBwYXJ0
bmVyIHByb2ZpbGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBpbnRlcm5hbCBvciBleHRlcm5h
bCBJRAogIHB1YmxpYyBzdGF0aWMgSURhdGEgZ2V0KFN0cmluZyBpZCwgU3RyaW5nIHR5cGUsIGJv
b2xlYW4gcmVsb2FkKSB0aHJvd3MgY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4
Y2VwdGlvbiwgamF2YS5pby5JT0V4Y2VwdGlvbiB7CiAgICByZXR1cm4gZ2V0KG5ldyBQcm9maWxl
SUQoaWQsIHR5cGUpLCByZWxvYWQpOwogIH0KCiAgLy8gYWRkcyB0aGUgZ2l2ZW4gcHJvZmlsZSB0
byB0aGUgY2FjaGUKICBwdWJsaWMgc3RhdGljIElEYXRhIHB1dChQcm9maWxlSUQgaWQsIElEYXRh
IHByb2ZpbGUpIHsKICAgIHJldHVybiBwcm9maWxlcy5wdXQoaWQsIHByb2ZpbGUpOwogIH0KCiAg
Ly8gcmVtb3ZlcyB0aGUgZ2l2ZW4gcHJvZmlsZSB0byB0aGUgY2FjaGUKICBwdWJsaWMgc3RhdGlj
IElEYXRhIHJlbW92ZShQcm9maWxlSUQgaWQpIHsKICAgIHJldHVybiBwcm9maWxlcy5yZW1vdmUo
aWQpOwogIH0KCiAgLy8gcmV0dXJucyB0aGUgbXkgZW50ZXJwcmlzZSBwcm9maWxlIGZyb20gdGhl
IHByb2ZpbGUgY2FjaGUgaWYgY2FjaGVkLCBvciBmcm9tIHRoZSBUcmFkaW5nIE5ldHdvcmtzIGRh
dGFiYXNlIGlmCiAgLy8gbm90IGNhY2hlZCAoYXQgd2hpY2ggdGltZSBpdCB3aWxsIGJlIGxhemls
eSBjYWNoZWQpCiAgcHVibGljIHN0YXRpYyBJRGF0YSBzZWxmKGJvb2xlYW4gcmVsb2FkKSB0aHJv
d3MgY29tLndtLmFwcC50bi5wcm9maWxlLlByb2ZpbGVTdG9yZUV4Y2VwdGlvbiwgamF2YS5pby5J
T0V4Y2VwdGlvbiB7CiAgICByZXR1cm4gZ2V0KG5ldyBQcm9maWxlSUQoY29tLndtLmFwcC50bi5w
cm9maWxlLlByb2ZpbGVTdG9yZS5nZXRNeUlEKCkpLCByZWxvYWQpOwogIH0KCiAgLy8gcmV0dXJu
cyB0aGUgbXkgZW50ZXJwcmlzZSBwcm9maWxlIGZyb20gdGhlIHByb2ZpbGUgY2FjaGUgaWYgY2Fj
aGVkLCBvciBmcm9tIHRoZSBUcmFkaW5nIE5ldHdvcmtzIGRhdGFiYXNlIGlmCiAgLy8gbm90IGNh
Y2hlZCAoYXQgd2hpY2ggdGltZSBpdCB3aWxsIGJlIGxhemlseSBjYWNoZWQpCiAgcHVibGljIHN0
YXRpYyBJRGF0YSBzZWxmKCkgdGhyb3dzIGNvbS53bS5hcHAudG4ucHJvZmlsZS5Qcm9maWxlU3Rv
cmVFeGNlcHRpb24sIGphdmEuaW8uSU9FeGNlcHRpb24gewogICAgcmV0dXJuIHNlbGYoZmFsc2Up
OwogIH0KfQ==</value>
  <value name="encodeutf8">true</value>
  <value name="extends"></value>
  <array name="implements" type="value" depth="1">
  </array>
  <array name="imports" type="value" depth="1">
  </array>
</Values>
