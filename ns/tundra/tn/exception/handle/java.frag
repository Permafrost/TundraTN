<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="name">handle</value>
  <value name="encodeutf8">true</value>
  <value name="body">SURhdGFDdXJzb3IgY3Vyc29yID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7Cgp0cnkgewogICAgQml6
RG9jRW52ZWxvcGUgYml6ZG9jID0gQml6RG9jRW52ZWxvcGVIZWxwZXIubm9ybWFsaXplKElEYXRh
SGVscGVyLmdldChjdXJzb3IsICIkYml6ZG9jIiwgSURhdGEuY2xhc3MsIHRydWUpLCB0cnVlLCBm
YWxzZSk7CiAgICBUaHJvd2FibGUgZXhjZXB0aW9uID0gSURhdGFIZWxwZXIuZ2V0KGN1cnNvciwg
IiRleGNlcHRpb24iLCBUaHJvd2FibGUuY2xhc3MsIHRydWUpOwogICAgYm9vbGVhbiBzdGF0dXNT
aWxlbmNlID0gSURhdGFIZWxwZXIuZ2V0T3JEZWZhdWx0KGN1cnNvciwgIiRzdGF0dXMuc2lsZW5j
ZT8iLCBCb29sZWFuLmNsYXNzLCBmYWxzZSk7CiAgICBTdHJpbmcgc2VydmljZSA9IElEYXRhSGVs
cGVyLmdldE9yRGVmYXVsdChjdXJzb3IsICIkZXhjZXB0aW9uLnNlcnZpY2UiLCBTdHJpbmcuY2xh
c3MsICJ0dW5kcmEudG4uZXhjZXB0aW9uOmhhbmRsZSIpOwoKICAgIFN0cmluZyBtZXNzYWdlQ2xh
c3MgPSAiUHJvY2Vzc2luZyIsCiAgICAgICAgICAgbWVzc2FnZVN1bW1hcnkgPSBleGNlcHRpb24g
PT0gbnVsbCA/ICJEb2N1bWVudCBwcm9jZXNzaW5nIGZhaWxlZCIgOiBNZXNzYWdlRm9ybWF0LmZv
cm1hdCgiRG9jdW1lbnQgcHJvY2Vzc2luZyBmYWlsZWQ6IHswfSIsIEV4Y2VwdGlvbkhlbHBlci5n
ZXRNZXNzYWdlKGV4Y2VwdGlvbiwgdHJ1ZSkpLCAKICAgICAgICAgICBtZXNzYWdlRGV0YWlsID0g
RXhjZXB0aW9uSGVscGVyLmdldFN0YWNrVHJhY2VTdHJpbmcoZXhjZXB0aW9uLCAzKSwKICAgICAg
ICAgICB1c2VyU3RhdHVzID0gIkVSUk9SIjsKICAgIAogICAgaWYgKGV4Y2VwdGlvbiAhPSBudWxs
KSB7CiAgICAgICAgQ2xhc3MgZXhjZXB0aW9uQ2xhc3MgPSBleGNlcHRpb24uZ2V0Q2xhc3MoKTsK
ICAgICAgICB0cnkgewogICAgICAgICAgICBNZXRob2QgZ2V0UHJvcGVydGllcyA9IGV4Y2VwdGlv
bkNsYXNzLmdldE1ldGhvZCgiZ2V0UHJvcGVydGllcyIpOwogICAgICAgICAgICBpZiAoZ2V0UHJv
cGVydGllcyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBPYmplY3QgcmV0dXJuVmFsdWUgPSBn
ZXRQcm9wZXJ0aWVzLmludm9rZShleGNlcHRpb24pOwogICAgICAgICAgICAgICAgaWYgKHJldHVy
blZhbHVlIGluc3RhbmNlb2YgTWFwKSB7CiAgICAgICAgICAgICAgICAgICAgTWFwIGV4Y2VwdGlv
bkRvY3VtZW50ID0gKE1hcClyZXR1cm5WYWx1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoIUJv
b2xlYW5IZWxwZXIucGFyc2UoKFN0cmluZylleGNlcHRpb25Eb2N1bWVudC5nZXQoIiRleGNlcHRp
b24ucmVjb3ZlcmFibGU/IiksIHRydWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3Nh
Z2VDbGFzcyA9ICJVbnJlY292ZXJhYmxlIjsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlclN0
YXR1cyA9ICJBQk9SVEVEIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAg
ICAgIE9iamVjdCBleGNlcHRpb25Db250ZW50T2JqZWN0ID0gZXhjZXB0aW9uRG9jdW1lbnQuZ2V0
KCIkZXhjZXB0aW9uLmNvbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZXhjZXB0aW9u
Q29udGVudE9iamVjdCBpbnN0YW5jZW9mIE1hcCkgewogICAgICAgICAgICAgICAgICAgICAgICBN
YXAgZXhjZXB0aW9uQ29udGVudCA9IChNYXApZXhjZXB0aW9uQ29udGVudE9iamVjdDsKICAgICAg
ICAgICAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbkNvbnRlbnQuc2l6ZSgpID4gMCkgewogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmlu
Z0J1aWxkZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlRGV0YWls
ICE9IG51bGwpIGJ1aWxkZXIuYXBwZW5kKG1lc3NhZ2VEZXRhaWwudHJpbSgpKTsKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
Ynl0ZVtdIGNvbnRlbnQgPSAoYnl0ZVtdKWV4Y2VwdGlvbkNvbnRlbnQuZ2V0KCIkY29udGVudCIp
OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBjb250ZW50VHlwZSA9IChT
dHJpbmcpZXhjZXB0aW9uQ29udGVudC5nZXQoIiRjb250ZW50LnR5cGUiKTsKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBJRGF0YSBjb250ZXh0ID0gKElEYXRhKWV4Y2VwdGlvbkNvbnRl
bnQuZ2V0KCIkY29udGVudC5jb250ZXh0Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgIT0gbnVsbCAm
JiBjb250ZW50Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgU3RyaW5nIGV4dGVuc2lvbiA9ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpZiAoY29udGVudFR5cGUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZXh0ZW5zaW9uID0gIi4iICsgTUlNRVR5cGVIZWxwZXIuZ2V0RmlsZUV4
dGVuc2lvbihjb250ZW50VHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBwYXJ0TmFtZSA9
IHNlcnZpY2UucmVwbGFjZUFsbCgiXFxXIiwgIl8iKSArICJfZXhjZXB0aW9uXyIgKyBEYXRlVGlt
ZUhlbHBlci5ub3coInl5eXlNTWRkSEhtbXNzU1NTWiIpICsgZXh0ZW5zaW9uOwoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgSURhdGFNYXAgc2NvcGUgPSBuZXcgSURhdGFNYXAo
KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucHV0KCIkYml6ZG9j
IiwgYml6ZG9jKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucHV0
KCIkY29udGVudCIsIGNvbnRlbnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzY29wZS5wdXQoIiRjb250ZW50LnBhcnQiLCBwYXJ0TmFtZSk7CiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNjb3BlLnB1dCgiJGNvbnRlbnQudHlwZSIsIGNvbnRlbnRUeXBl
KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUucHV0KCIkb3Zlcndy
aXRlPyIsICJ0cnVlIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2
aWNlLmRvSW52b2tlKE5TTmFtZS5jcmVhdGUoInR1bmRyYS50bi5kb2N1bWVudC5jb250ZW50OmFk
ZCIpLCBzY29wZSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVy
LmFwcGVuZCgiXG4tLS1cblJlZmVyIHRvIGNvbnRlbnQgcGFydDogIikuYXBwZW5kKHBhcnROYW1l
KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGlmIChjb250ZXh0ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgSURhdGFZQU1MUGFyc2VyIHBhcnNlciA9IG5ldyBJRGF0YVlBTUxQYXJz
ZXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGNvbnRleHRT
dHJpbmcgPSBwYXJzZXIuZW1pdChjb250ZXh0LCBTdHJpbmcuY2xhc3MpOwogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFwcGVuZCgiXG4tLS1cbiIpLmFwcGVuZChj
b250ZXh0U3RyaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIC8vIHN1cHByZXNzL2lnbm9yZSBleGNlcHRpb25zIGFkZGluZyBj
b250ZW50IHBhcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURldGFpbCA9IGJ1aWxkZXIudG9TdHJp
bmcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAg
ICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
fQogICAgICAgIH0gY2F0Y2goSWxsZWdhbEFjY2Vzc0V4Y2VwdGlvbiBleCkgewogICAgICAgICAg
ICAvLyBkbyBub3RoaW5nCiAgICAgICAgfSBjYXRjaChJbnZvY2F0aW9uVGFyZ2V0RXhjZXB0aW9u
IGV4KSB7CiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcKICAgICAgICB9IGNhdGNoKE5vU3VjaE1l
dGhvZEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICAvLyBkbyBub3RoaW5nCiAgICAgICAgfQog
ICAgfQoKICAgIEFjdGl2aXR5TG9nSGVscGVyLmxvZyhFbnRyeVR5cGUuRVJST1IsIG1lc3NhZ2VD
bGFzcywgbWVzc2FnZVN1bW1hcnksIG1lc3NhZ2VEZXRhaWwsIGJpemRvYyk7CiAgICBCaXpEb2NF
bnZlbG9wZUhlbHBlci5zZXRTdGF0dXMoYml6ZG9jLCBudWxsLCB1c2VyU3RhdHVzLCBzdGF0dXNT
aWxlbmNlKTsKCiAgICBFeGNlcHRpb25IZWxwZXIucmFpc2UoZXhjZXB0aW9uKTsKfSBmaW5hbGx5
IHsKICAgIGN1cnNvci5kZXN0cm95KCk7Cn0=</value>
</Values>
